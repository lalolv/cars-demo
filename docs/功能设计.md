# 汽车展示台 - 功能设计文档

## 1. 项目概述

基于 Godot 4.5 开发的 3D 汽车展示应用，支持移动端手势交互，具备动态光效和音乐联动功能。

## 2. 核心功能模块

### 2.1 3D 场景交互

**手势控制**
- 单指滑动：水平旋转摄像机视角（绕场景中心）
- 双指捏合：缩放视角（限制在最小/最大距离内）
- 旋转范围限制：垂直角度 10° ~ 60°，防止穿模

**摄像机设置**
- 使用轨道摄像机模式，始终朝向场景中心
- 默认视角：45° 俯视角，距离中心 8 米

### 2.2 旋转舞台

**舞台底座**
- 圆形平台，直径约 4 米
- 持续顺时针旋转，速度约 5°/秒
- 材质：反光金属或玻璃质感

**汽车展示位**
- 汽车模型作为舞台子节点，随舞台旋转
- 汽车中心对齐舞台中心
- 支持不同尺寸车型的自动缩放适配

### 2.3 动态光柱系统

**光柱布局**
- 6-8 根光柱，均匀分布在舞台周围
- 排列成圆形，半径约 3 米
- 每根光柱高度 3-5 米

**音乐联动**
- 实时分析音频频谱（使用 AudioEffectSpectrumAnalyzer）
- 将频谱数据映射到光柱属性：
  - 高度变化：跟随音量/频率强度
  - 颜色变化：根据频段显示不同颜色
  - 亮度脉冲：跟随节拍闪烁

**颜色方案**
- 默认彩虹色分布（红、橙、黄、绿、青、蓝、紫）
- 支持单色模式和渐变模式

### 2.4 汽车模型管理

**模型切换**
- UI 提供汽车列表/缩略图选择
- 切换时播放淡入淡出动画
- 预加载机制，减少切换延迟

**模型要求**
- 格式：GLTF/GLB（推荐）
- 统一朝向：车头朝向 +Z 轴
- 原点位置：车辆底部中心

### 2.5 背景音乐系统

**音乐播放**
- 支持循环播放
- 音量控制
- 播放/暂停控制

**音乐切换**
- UI 提供音乐列表选择
- 切换时渐变过渡（淡出旧音乐，淡入新音乐）
- 支持格式：OGG、WAV、MP3

## 3. 用户界面

### 3.1 主界面布局

```
┌─────────────────────────────────┐
│  [设置]              [音乐控制] │
│                                 │
│                                 │
│         3D 展示区域             │
│                                 │
│                                 │
│  ┌─────────────────────────┐   │
│  │    汽车选择滑动列表      │   │
│  └─────────────────────────┘   │
└─────────────────────────────────┘
```

### 3.2 UI 组件

**顶部栏**
- 设置按钮：打开设置面板
- 音乐控制：播放/暂停、音量、曲目切换

**底部栏**
- 汽车缩略图横向滚动列表
- 当前选中项高亮显示

**设置面板**
- 旋转速度调节
- 光效强度调节
- 自动旋转开关

## 4. 性能考虑

- 移动端目标帧率：60 FPS
- 光柱使用简单几何体 + 自发光材质，避免实时光源过多
- 汽车模型 LOD 支持（可选）
- 音频分析使用较低采样率，减少 CPU 开销

## 5. 扩展功能（可选）

- 汽车颜色自定义
- 截图/录制功能
- 多舞台主题切换
- 汽车信息展示卡片
